<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tony · Courses</title>
  <link rel="stylesheet" href="assets/style.css" />
  <!-- 可选：系统字体 + 细节优化 -->
  <meta name="description" content="Zoe 的课程主页（Python / ML / VS Code / Jupyter）" />
</head>
<body>
  <div class="layout">
    <!-- 左侧侧边栏 -->
    <aside class="sidebar">
      <div class="brand">
        <!-- 可换成你的 logo.png -->
        <!-- <img src="assets/logo.png" alt="Logo" /> -->
        <h1>Tony · Courses</h1>
        <p class="subtitle">Python · ML · Tools</p>
      </div>

      <nav class="nav">
        <!-- data-src 指向右侧要加载的课程页面 -->
        <a class="nav-item" href="#class1" data-src="lessons/class1.html">Class 1 · 环境搭建</a>
        <a class="nav-item" href="#class2" data-src="lessons/class2.html">Class 2 · （占位）数据探索</a>
        <!-- 以后新增课程，只需复制一行，改 data-src 与文字 -->
      </nav>

      <div class="links">
        <a href="https://github.com/Chenzhang0329" target="_blank" rel="noopener">GitHub</a>
        <a href="https://github.com/Chenzhang0329/PythonMachineLearning" target="_blank" rel="noopener">Repo</a>
      </div>
    </aside>

    <!-- 右侧内容区：用 iframe 加载各课 HTML -->
    <main class="content">
      <iframe id="viewer" title="Course Content" src="" loading="lazy"></iframe>
    </main>
  </div>

  <script>
    // 简单路由：依据 hash (#class1 等) 或默认加载第一个
    const links = Array.from(document.querySelectorAll('.nav-item'));
    const iframe = document.getElementById('viewer');

    function loadByHash() {
      const hash = location.hash || '#class1'; // 默认加载 class1
      const target = links.find(a => a.getAttribute('href') === hash) || links[0];
      if (!target) return;

      // 设置 iframe src
      const src = target.getAttribute('data-src');
      if (iframe.getAttribute('src') !== src) {
        iframe.setAttribute('src', src);
      }

      // 高亮当前项
      links.forEach(a => a.classList.toggle('active', a === target));
    }

    // 自适应高度（同源时可读内部文档高度；我们同仓库/同域，OK）
    function resizeIframe() {
      try {
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        if (!doc) return;
        const h = Math.max(
          doc.body.scrollHeight, doc.documentElement.scrollHeight,
          doc.body.offsetHeight, doc.documentElement.offsetHeight
        );
        iframe.style.height = Math.max(h + 20, window.innerHeight - 32) + 'px';
      } catch (e) { /* ignore cross-origin */ }
    }

    window.addEventListener('hashchange', () => { loadByHash(); });
    iframe.addEventListener('load', () => {
      resizeIframe();
      // 图片/字体懒加载的二次调整
      let ticks = 0;
      const t = setInterval(() => { resizeIframe(); if (++ticks > 20) clearInterval(t); }, 700);
    });

    // 初次进入
    loadByHash();
    window.addEventListener('resize', resizeIframe);
  </script>
</body>
</html>

